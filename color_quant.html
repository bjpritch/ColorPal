<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>html5 local file upload demo</title>
<meta name="Generator" content="Vim/7.3">
<meta name="plugin-version" content="vim7.3_v10">
<meta name="syntax" content="html">
<meta name="settings" content="use_css,pre_wrap,expand_tabs">
<style type="text/css">
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #d7d7d7; background-color: #1c1c1c; }
body { font-family: monospace; color: #d7d7d7; background-color: #1c1c1c; }

#colorpal_canvas { 
    border: 3px dotted #888;
    width: 400px;
    height: 300px;
    margin: 0 20px;
}

#colorpal_canvas
{
    -webkit-transition: all 0.33s ease-in; /* Safari and Chrome */
       -moz-transition: all 0.33s ease-in; /* Firefox 4 */
         -o-transition: all 0.33s ease-in; /* Opera */
            transition: all 0.33s ease-in;
}
-->
</style>

<script type="text/javascript">

function log() {
    console.log( arguments );
};

var NUM_DIMENSIONS = 3;

var Point = function() {
    var r, g, b,

    init = function( _r, _g, _b ) {
        r = _r;
        g = _g;
        b = _b;
    };

    return {
        init : init,
        r    : r,
        g    : g,
        b    : b
    };
};

var Block = function() {
    var min_corner,
        max_corner,
        points,

    init = function( _pixels ) {

        points = [];
        min_corner = [];
        max_corner = [];

        for( var i = _pixels.length - 1; i >= 0; i -= 4 ) {

            var p = Point();
            p.init( _pixels[ i - 3 ],
                    _pixels[ i - 2 ],
                    _pixels[ i - 1 ] );

            // update min_corner and max_corner if needed
            var p_sum = p.r + p.g + p.b;
            min_corner = ( min_corner < p_sum ) ? min_corner : ;
            points.push( p );
        }

        log( points );

    };

    return {
        init: init,
        min_corner : min_corner,
        points : points
    };

};


var color_quantization_algorithms = function() {
    
};

window.onload = function() {
    var img = document.createElement("img");
    img.src = "bbfeet.png";
    canvas  = document.getElementById("colorpal_canvas");
    ctx     = canvas.getContext("2d");

    // match canvas height to img height
    canvas.width = img.width / 10;
    canvas.height = img.height / 10;
    canvas.style.width = img.width / 10 + "px";
    canvas.style.height = img.height / 10 + "px";

    // draw image!
    ctx.drawImage(img, 0, 0, img.width / 10, img.height / 10);

    var image_data = ctx.getImageData( 0, 0, canvas.width, canvas.height ).data;

    var b = Block();
    b.init( image_data );
};
</script>

</head>
<body>
<pre>

<h1>HTML5 color quantization</h1>

<canvas id="colorpal_canvas"></canvas>

</pre>
</body>
</html>


